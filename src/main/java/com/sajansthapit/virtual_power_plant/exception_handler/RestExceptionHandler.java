package com.sajansthapit.virtual_power_plant.exception_handler;import com.sajansthapit.virtual_power_plant.exception_handler.exceptions.DuplicateBatteryException;import com.sajansthapit.virtual_power_plant.exception_handler.exceptions.InvalidPostCodeRangeException;import org.springframework.http.HttpStatus;import org.springframework.http.ProblemDetail;import org.springframework.validation.FieldError;import org.springframework.web.bind.MethodArgumentNotValidException;import org.springframework.web.bind.annotation.ExceptionHandler;import org.springframework.web.bind.annotation.RestControllerAdvice;import java.util.HashMap;import java.util.Map;@RestControllerAdvicepublic class RestExceptionHandler {    @ExceptionHandler(DuplicateBatteryException.class)    ProblemDetail handleDuplicateBatteryException(DuplicateBatteryException duplicateBatteryException) {        return ProblemDetail.forStatusAndDetail(HttpStatus.BAD_REQUEST, duplicateBatteryException.getMessage());    }    @ExceptionHandler(MethodArgumentNotValidException.class)    ProblemDetail handleMethodArgumentNotValidException(MethodArgumentNotValidException methodArgumentNotValidException) {        Map<String, Object> errors = new HashMap<>();        methodArgumentNotValidException.getBindingResult().getAllErrors()                .forEach(error -> {                    String fieldName = ((FieldError) error).getField();                    String message = error.getDefaultMessage();                    errors.put(fieldName, message);                });        String message = "Failed to validate the data with error";        ProblemDetail problemDetail = ProblemDetail.forStatusAndDetail(HttpStatus.BAD_REQUEST, message);        problemDetail.setProperties(errors);        return problemDetail;    }    @ExceptionHandler(InvalidPostCodeRangeException.class)    ProblemDetail handleInvalidPostCodeRangeException(InvalidPostCodeRangeException invalidPostCodeRangeException) {        return ProblemDetail.forStatusAndDetail(HttpStatus.BAD_REQUEST, invalidPostCodeRangeException.getMessage());    }}